<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relational Compatibility Analysis</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0f172a;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    text-align: center;
}

.container {
    width: 90%;
    max-width: 500px;
}

button {
    width: 100%;
    padding: 14px;
    margin: 8px 0;
    background: #1e293b;
    border: 1px solid #334155;
    color: white;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
}

button:hover { background: #334155; }

.progress {
    height: 6px;
    background: #1e293b;
    border-radius: 10px;
    margin-bottom: 20px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    width: 0%;
    background: #22c55e;
    transition: 0.3s;
}

.hidden { display: none; }

.final-screen {
    background: white;
    color: black;
    height: 100vh;
    width: 100vw;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
}

.final-btn {
    width: 200px;
    margin: 10px;
    font-size: 18px;
}

#noBtn {
    position: absolute;
}
</style>
</head>
<body>

<div class="container" id="start">
    <h1>Relationship Metrics Evaluation</h1>
    <p>AI-based compatibility scan.</p>
    <button onclick="startTest()">Start Analysis</button>
</div>

<div class="container hidden" id="quiz">
    <div class="progress">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    <h2 id="question"></h2>
    <div id="answers"></div>
</div>

<div class="container hidden" id="loading">
    <h2>Processing behavioral data...</h2>
</div>

<script>

const questions = [
{q:"Preferred weekend activity?",a:["Gaming","Movie night","Outdoor","Random chaos"]},
{q:"Communication style?",a:["Direct","Playful","Deep talks","Silent vibe"]},
{q:"Do you believe in destiny?",a:["Yes","Maybe","Unsure","No"]},
{q:"Ideal co-op game?",a:["Minecraft","Horror","Story-driven","Survival"]},
{q:"Attachment style?",a:["Secure","Anxious","Avoidant","Chaotic"]},
{q:"Favorite love language?",a:["Time","Words","Acts","Chaos"]},
{q:"Risk tolerance?",a:["High","Medium","Low","Depends"]},
{q:"Trust level?",a:["100%","High","Growing","Testing"]}
];

let current = 0;

function startTest(){
    document.getElementById("start").classList.add("hidden");
    document.getElementById("quiz").classList.remove("hidden");
    showQuestion();
}

function showQuestion(){
    const q = questions[current];
    document.getElementById("question").innerText = q.q;
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    document.getElementById("progressBar").style.width =
        ((current / questions.length) * 100) + "%";

    q.a.forEach(answer=>{
        const btn = document.createElement("button");
        btn.innerText = answer;
        btn.onclick = nextQuestion;
        answersDiv.appendChild(btn);
    });
}

function nextQuestion(){
    current++;
    if(current < questions.length){
        showQuestion();
    } else {
        finishTest();
    }
}

function finishTest(){
    document.getElementById("quiz").classList.add("hidden");
    document.getElementById("loading").classList.remove("hidden");

    setTimeout(()=>{
        document.body.innerHTML = `
        <div class="final-screen">
            <h1>Compatibility Score: 99.8%</h1>
            <p>Final confirmation required.</p>
            <h2>Ar būsi mano Valentine? ❤️</h2>
            <button class="final-btn" onclick="yes()">TAIP</button>
            <button class="final-btn" id="noBtn">NE</button>
        </div>
        `;

        const noBtn = document.getElementById("noBtn");

        function moveButton(){
            const safeMargin = 150;
            let x = Math.random() * (window.innerWidth - safeMargin);
            let y = Math.random() * (window.innerHeight - safeMargin);

            noBtn.style.left = x + "px";
            noBtn.style.top = y + "px";
        }

        moveButton(); // iškart perkeliam, kad nebūtų po pele

        noBtn.addEventListener("mouseenter", moveButton);
        noBtn.addEventListener("touchstart", moveButton);

    },2500);
}

function yes(){
    document.body.innerHTML =
        "<h1 style='margin-top:40vh;text-align:center;'>Myliu tave lialia</h1>";
}

</script>
</body>
</html>

